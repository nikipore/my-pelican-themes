(function(e){e(function(){function t(e){var t=[],n=e.split(",");for(var r=0;r<n.length;r++){var i=n[r].split("-");if(i.length===2){for(var s=parseInt(i[0],10);s<=i[1];s++){t.push(s)}}else if(i.length===1){t.push(parseInt(i[0],10))}}return t}e("div[data-gist-id], span[data-gist-id], p[data-gist-id]").each(function(){var n=e(this),r,i,s,o,u,a,f={};n.css("display","block");r=n.attr("data-gist-id")||"";s=n.attr("data-gist-file");u=n.attr("data-gist-hide-footer")==="true";a=n.attr("data-gist-hide-line-numbers")==="true";o=n.attr("data-gist-line")||"";o=o.replace(/ /g,"");if(s){f.file=s}if(!r)return false;if(isNaN(parseInt(r,10))){n.html("Failed loading gist with incorrect id format: "+r);return false}i="https://gist.github.com/"+r+".json";n.html("Loading gist "+i+(f.file?", file: "+f.file:"")+"...");e.ajax({url:i,data:f,dataType:"jsonp",timeout:1e4,success:function(r){var s,f,l;if(r&&r.div){if(r.stylesheet&&r.stylesheet.indexOf("http")!==0){if(r.stylesheet.indexOf("/")!==0){r.stylesheet="/"+r.stylesheet}r.stylesheet="https://gist.github.com"+r.stylesheet}if(r.stylesheet&&e('link[href="'+r.stylesheet+'"]').length===0){s=document.createElement("link"),head=document.getElementsByTagName("head")[0];s.type="text/css";s.rel="stylesheet";s.href=r.stylesheet;head.insertBefore(s,head.firstChild)}l=e(r.div);l.removeAttr("id");n.html("").append(l);if(o){f=t(o),l.find(".line").each(function(t){if(e.inArray(t+1,f)===-1){e(this).remove()}});l.find(".line-number").each(function(t){if(e.inArray(t+1,f)===-1){e(this).remove()}})}if(u){l.find(".gist-meta").remove()}if(a){l.find(".line-numbers").remove()}}else{n.html("Failed loading gist "+i)}},error:function(){n.html("Failed loading gist "+i)}})})})})(jQuery)